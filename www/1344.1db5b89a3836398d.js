"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1344],{1344:(Y,p,g)=>{g.r(p),g.d(p,{HomePageModule:()=>N});var m=g(2200),y=g(4341),r=g(7343),k=g(8132),s=g(467),t=g(3664),d=g(2615),C=g(3101),T=g(369);let F=(()=>{var o;class a{constructor(e){this.storage=e,this.KEY="tasks",this.tasks=[],this.isReady=!1,this.init()}init(){var e=this;return(0,s.A)(function*(){yield e.storage.create();const n=yield e.storage.get(e.KEY);e.tasks=n||[],e.isReady=!0})()}ensureReady(){var e=this;return(0,s.A)(function*(){e.isReady||(yield e.init())})()}getAll(){var e=this;return(0,s.A)(function*(){return yield e.ensureReady(),e.tasks})()}add(e,n){var i=this;return(0,s.A)(function*(){yield i.ensureReady();const l={id:(0,C.A)(),title:e,completed:!1,categoryId:n??""};i.tasks.push(l),yield i.storage.set(i.KEY,i.tasks)})()}toggleComplete(e){var n=this;return(0,s.A)(function*(){yield n.ensureReady();const i=n.tasks.find(l=>l.id===e);i&&(i.completed=!i.completed,yield n.storage.set(n.KEY,n.tasks))})()}delete(e){var n=this;return(0,s.A)(function*(){yield n.ensureReady(),n.tasks=n.tasks.filter(i=>i.id!==e),yield n.storage.set(n.KEY,n.tasks)})()}update(e){var n=this;return(0,s.A)(function*(){yield n.ensureReady();const i=n.tasks.findIndex(l=>l.id===e.id);-1!==i&&(n.tasks[i]=e,yield n.storage.set(n.KEY,n.tasks))})()}static#t=o=()=>(this.\u0275fac=function(n){return new(n||a)(d.KVO(T.w))},this.\u0275prov=d.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}))}return o(),a})();var j=g(4191),x=g(7055);const A=o=>({completed:o});function I(o,a){if(1&o&&(t.j41(0,"ion-select-option",12),t.EFF(1),t.k0s()),2&o){const c=a.$implicit;t.Y8G("value",c.id),t.R7$(),t.SpI(" ",c.name," ")}}function P(o,a){if(1&o&&(t.j41(0,"p"),t.nrm(1,"ion-icon",23),t.EFF(2),t.k0s()),2&o){const c=t.XpG().$implicit,e=t.XpG(2);t.R7$(2),t.SpI(" ",e.getCategoryName(c.categoryId)," ")}}function E(o,a){if(1&o){const c=t.RV6();t.j41(0,"ion-item",17)(1,"ion-checkbox",18),t.bIt("ionChange",function(){const n=d.eBV(c).$implicit,i=t.XpG(2);return d.Njj(i.toggleTask(n))}),t.k0s(),t.j41(2,"ion-label")(3,"h2",19),t.EFF(4),t.k0s(),t.DNE(5,P,3,1,"p",20),t.k0s(),t.j41(6,"ion-button",21),t.bIt("click",function(){const n=d.eBV(c).$implicit,i=t.XpG(2);return d.Njj(i.deleteTask(n.id))}),t.nrm(7,"ion-icon",22),t.k0s()()}if(2&o){const c=a.$implicit;t.R7$(),t.Y8G("checked",c.completed),t.R7$(2),t.Y8G("ngClass",t.eq3(4,A,c.completed)),t.R7$(),t.JRh(c.title),t.R7$(),t.Y8G("ngIf",c.categoryId)}}function R(o,a){if(1&o&&(t.j41(0,"ion-list",15),t.DNE(1,E,8,6,"ion-item",16),t.k0s()),2&o){const c=t.XpG();t.R7$(),t.Y8G("ngForOf",c.tasks)("ngForTrackBy",c.trackById)}}function b(o,a){1&o&&(t.j41(0,"div",24),t.nrm(1,"ion-icon",25),t.j41(2,"p"),t.EFF(3,"No hay tareas registradas"),t.k0s()())}function S(o,a){1&o&&(t.j41(0,"div",24),t.nrm(1,"ion-icon",25),t.j41(2,"p"),t.EFF(3,"No hay tareas registradas"),t.k0s()())}let _=(()=>{var o;class a{constructor(e,n,i,l,u){this.taskService=e,this.categoryService=n,this.alertCtrl=i,this.toastCtrl=l,this.router=u,this.tasks=[],this.categories=[],this.selectedCategoryFilter=null}ngOnInit(){var e=this;return(0,s.A)(function*(){yield e.loadCategories(),yield e.loadTasks()})()}ionViewWillEnter(){var e=this;return(0,s.A)(function*(){yield e.loadCategories(),yield e.loadTasks()})()}loadTasks(){var e=this;return(0,s.A)(function*(){const n=yield e.taskService.getAll();e.tasks=e.selectedCategoryFilter?n.filter(i=>i.categoryId===e.selectedCategoryFilter):n})()}loadCategories(){var e=this;return(0,s.A)(function*(){e.categories=yield e.categoryService.getAll()})()}addTask(){var e=this;return(0,s.A)(function*(){var i;yield(yield e.alertCtrl.create({header:"Nueva Tarea",inputs:[{name:"title",type:"text",placeholder:"Descripci\xf3n de la tarea"}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Siguiente",handler:(i=(0,s.A)(function*(l){const u=(l.title||"").trim();return 0===u.length?(yield(yield e.alertCtrl.create({header:"Campo obligatorio",message:"Por favor ingresa una descripci\xf3n para la tarea.",buttons:["Aceptar"]})).present(),!1):(e.categories.length>0?yield(yield e.alertCtrl.create({header:"Selecciona una categor\xeda",inputs:[...e.categories.map(h=>({name:"categoryId",type:"radio",label:h.name,value:h.id}))],buttons:[{text:"Cancelar",role:"cancel"},{text:"Guardar",handler:(h=(0,s.A)(function*(v){return yield e.taskService.add(u,v),yield e.loadTasks(),e.showToast("Tarea creada correctamente"),!0}),function(H){return h.apply(this,arguments)})}]})).present():(yield e.taskService.add(u),yield e.loadTasks(),e.showToast("Tarea creada correctamente")),!0);var h}),function(u){return i.apply(this,arguments)})}]})).present()})()}toggleTask(e){var n=this;return(0,s.A)(function*(){yield n.taskService.toggleComplete(e.id),yield n.loadTasks()})()}deleteTask(e){var n=this;return(0,s.A)(function*(){yield n.taskService.delete(e),yield n.loadTasks(),n.showToast("Tarea eliminada")})()}filterTasksByCategory(e){var n=this;return(0,s.A)(function*(){n.selectedCategoryFilter=e.detail.value,yield n.loadTasks()})()}showToast(e){var n=this;return(0,s.A)(function*(){yield(yield n.toastCtrl.create({message:e,duration:1500,position:"bottom"})).present()})()}getCategoryName(e){if(!e||!this.categories||0===this.categories.length)return"Sin categor\xeda";const n=this.categories.find(i=>String(i.id)===String(e));return n?n.name:"Sin categor\xeda"}goToCategories(){this.router.navigate(["/category"])}trackById(e,n){return n.id}static#t=o=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(F),t.rXU(j.M),t.rXU(r.hG),t.rXU(r.K_),t.rXU(x.Ix))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-home"]],decls:27,vars:4,consts:[["noTasks",""],["color","primary"],["slot","end"],["fill","clear",3,"click"],["name","add-circle-outline","slot","icon-only"],["name","folder-outline","slot","icon-only"],[1,"ion-padding"],[1,"filter-card"],[1,"filter-title"],["name","funnel-outline"],["lines","none"],["interface","popover","placeholder","Selecciona una categor\xeda",3,"ionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["class","task-list",4,"ngIf","ngIfElse"],[1,"task-list"],["class","task-item","lines","inset",4,"ngFor","ngForOf","ngForTrackBy"],["lines","inset",1,"task-item"],["slot","start",3,"ionChange","checked"],[3,"ngClass"],[4,"ngIf"],["fill","clear","color","danger",3,"click"],["slot","icon-only","name","trash-outline"],["name","pricetag-outline"],[1,"no-tasks","ion-text-center","ion-padding"],["name","document-outline","size","large"]],template:function(n,i){if(1&n){const l=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar",1)(2,"ion-title"),t.EFF(3,"Tareas"),t.k0s(),t.j41(4,"ion-buttons",2)(5,"ion-button",3),t.bIt("click",function(){return d.eBV(l),d.Njj(i.addTask())}),t.nrm(6,"ion-icon",4),t.k0s(),t.j41(7,"ion-button",3),t.bIt("click",function(){return d.eBV(l),d.Njj(i.goToCategories())}),t.nrm(8,"ion-icon",5),t.k0s()()()(),t.j41(9,"ion-content",6)(10,"ion-card",7)(11,"ion-card-header")(12,"ion-card-title",8),t.nrm(13,"ion-icon",9),t.j41(14,"span"),t.EFF(15,"Filtrar por Categor\xeda"),t.k0s()()(),t.j41(16,"ion-card-content")(17,"ion-item",10)(18,"ion-select",11),t.bIt("ionChange",function(f){return d.eBV(l),d.Njj(i.filterTasksByCategory(f))}),t.j41(19,"ion-select-option",12),t.EFF(20,"Todas"),t.k0s(),t.DNE(21,I,2,2,"ion-select-option",13),t.k0s()()()(),t.DNE(22,R,2,2,"ion-list",14)(23,b,4,0,"ng-template",null,0,t.C5r)(25,S,4,0,"ng-template",null,0,t.C5r),t.k0s()}if(2&n){const l=t.sdS(24);t.R7$(19),t.Y8G("value",null),t.R7$(2),t.Y8G("ngForOf",i.categories),t.R7$(),t.Y8G("ngIf",i.tasks.length>0)("ngIfElse",l)}},dependencies:[m.MD,m.YU,m.Sq,m.bT,y.YN,r.bv,r.Jm,r.QW,r.b_,r.I9,r.ME,r.tN,r.eY,r.W9,r.eU,r.iq,r.uz,r.he,r.nf,r.Nm,r.Ip,r.BC,r.ai,r.hB,r.Je],styles:[".filter-card[_ngcontent-%COMP%]{margin-bottom:16px;box-shadow:0 4px 10px #00000014;border-radius:12px}.filter-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:1rem;color:var(--ion-color-primary)}.create-category-btn[_ngcontent-%COMP%]{margin-top:8px}.task-list[_ngcontent-%COMP%]{margin-top:10px}.task-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.05rem;font-weight:500}.task-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-medium);display:flex;align-items:center;gap:4px}.completed[_ngcontent-%COMP%]{text-decoration:line-through;color:var(--ion-color-medium)}.no-tasks[_ngcontent-%COMP%]{opacity:.6}"]}))}return o(),a})();const B=[{path:"",component:_}];let G=(()=>{var o;class a{static#t=o=()=>(this.\u0275fac=function(n){return new(n||a)},this.\u0275mod=t.$C({type:a}),this.\u0275inj=d.G2t({imports:[k.iI.forChild(B),k.iI]}))}return o(),a})(),N=(()=>{var o;class a{static#t=o=()=>(this.\u0275fac=function(n){return new(n||a)},this.\u0275mod=t.$C({type:a}),this.\u0275inj=d.G2t({imports:[m.MD,y.YN,r.bv,G,_]}))}return o(),a})()}}]);