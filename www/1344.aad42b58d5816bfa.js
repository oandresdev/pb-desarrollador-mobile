"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1344],{1344:(M,f,u)=>{u.r(f),u.d(f,{HomePageModule:()=>O});var m=u(2200),k=u(4341),r=u(7343),y=u(8132),s=u(467),C=u(5312),t=u(3664),d=u(2615),T=u(3101),b=u(369);let x=(()=>{var o;class i{constructor(e){this.storage=e,this.KEY="tasks",this.tasks=[],this.isReady=!1,this.init()}init(){var e=this;return(0,s.A)(function*(){yield e.storage.create();const n=yield e.storage.get(e.KEY);e.tasks=n||[],e.isReady=!0})()}ensureReady(){var e=this;return(0,s.A)(function*(){e.isReady||(yield e.init())})()}getAll(){var e=this;return(0,s.A)(function*(){return yield e.ensureReady(),e.tasks})()}add(e,n){var a=this;return(0,s.A)(function*(){yield a.ensureReady();const l={id:(0,T.A)(),title:e,completed:!1,categoryId:n??""};a.tasks.push(l),yield a.storage.set(a.KEY,a.tasks)})()}toggleComplete(e){var n=this;return(0,s.A)(function*(){yield n.ensureReady();const a=n.tasks.find(l=>l.id===e);a&&(a.completed=!a.completed,yield n.storage.set(n.KEY,n.tasks))})()}delete(e){var n=this;return(0,s.A)(function*(){yield n.ensureReady(),n.tasks=n.tasks.filter(a=>a.id!==e),yield n.storage.set(n.KEY,n.tasks)})()}update(e){var n=this;return(0,s.A)(function*(){yield n.ensureReady();const a=n.tasks.findIndex(l=>l.id===e.id);-1!==a&&(n.tasks[a]=e,yield n.storage.set(n.KEY,n.tasks))})()}static#t=o=()=>(this.\u0275fac=function(n){return new(n||i)(d.KVO(b.w))},this.\u0275prov=d.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}))}return o(),i})();var F=u(4191),A=u(2122);const j=o=>({completed:o});function P(o,i){if(1&o&&(t.j41(0,"ion-select-option",14),t.EFF(1),t.k0s()),2&o){const c=i.$implicit;t.Y8G("value",c.id),t.R7$(),t.SpI(" ",c.name," ")}}function E(o,i){if(1&o&&(t.j41(0,"p",25),t.EFF(1),t.k0s()),2&o){const c=t.XpG().$implicit,e=t.XpG(2);t.R7$(),t.SpI(" ",e.getCategoryName(c.categoryId)," ")}}function I(o,i){if(1&o){const c=t.RV6();t.j41(0,"ion-card",19)(1,"ion-item",11)(2,"ion-checkbox",20),t.bIt("ionChange",function(){const n=d.eBV(c).$implicit,a=t.XpG(2);return d.Njj(a.toggleTask(n))}),t.k0s(),t.j41(3,"ion-label")(4,"h2",21),t.EFF(5),t.k0s(),t.DNE(6,E,2,1,"p",22),t.k0s(),t.j41(7,"ion-button",23),t.bIt("click",function(){const n=d.eBV(c).$implicit,a=t.XpG(2);return d.Njj(a.deleteTask(n.id))}),t.nrm(8,"ion-icon",24),t.k0s()()()}if(2&o){const c=i.$implicit;t.R7$(2),t.Y8G("checked",c.completed),t.R7$(2),t.Y8G("ngClass",t.eq3(4,j,c.completed)),t.R7$(),t.JRh(c.title),t.R7$(),t.Y8G("ngIf",c.categoryId)}}function R(o,i){if(1&o&&(t.j41(0,"ion-list",17),t.DNE(1,I,9,6,"ion-card",18),t.k0s()),2&o){const c=t.XpG();t.R7$(),t.Y8G("ngForOf",c.tasks)("ngForTrackBy",c.trackById)}}function G(o,i){if(1&o){const c=t.RV6();t.j41(0,"div",26),t.nrm(1,"ion-icon",27),t.j41(2,"h3"),t.EFF(3,"No tienes tareas registradas"),t.k0s(),t.j41(4,"p"),t.EFF(5,"Agrega tu primera tarea para comenzar a organizar tu d\xeda."),t.k0s(),t.j41(6,"ion-button",28),t.bIt("click",function(){d.eBV(c);const n=t.XpG();return d.Njj(n.addTask())}),t.nrm(7,"ion-icon",6),t.EFF(8," Agregar Tarea "),t.k0s()()}}let _=(()=>{var o;class i{constructor(e,n,a,l,g){this.taskService=e,this.categoryService=n,this.alertCtrl=a,this.toastCtrl=l,this.router=g,this.tasks=[],this.categories=[],this.selectedCategoryFilter=null}ngOnInit(){var e=this;return(0,s.A)(function*(){yield e.loadCategories(),yield e.loadTasks()})()}ionViewWillEnter(){var e=this;return(0,s.A)(function*(){yield e.loadCategories(),yield e.loadTasks()})()}loadTasks(){var e=this;return(0,s.A)(function*(){const n=yield e.taskService.getAll();e.tasks=e.selectedCategoryFilter?n.filter(a=>a.categoryId===e.selectedCategoryFilter):n})()}loadCategories(){var e=this;return(0,s.A)(function*(){e.categories=yield e.categoryService.getAll()})()}addTask(){var e=this;return(0,s.A)(function*(){var a;yield(yield e.alertCtrl.create({header:"Nueva Tarea",inputs:[{name:"title",type:"text",placeholder:"Descripci\xf3n de la tarea"}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Siguiente",handler:(a=(0,s.A)(function*(l){const g=(l.title||"").trim();return 0===g.length?(yield(yield e.alertCtrl.create({header:"Campo obligatorio",message:"Por favor ingresa una descripci\xf3n para la tarea.",buttons:["Aceptar"]})).present(),!1):(e.categories.length>0?yield(yield e.alertCtrl.create({header:"Selecciona una categor\xeda",inputs:[...e.categories.map(h=>({name:"categoryId",type:"radio",label:h.name,value:h.id}))],buttons:[{text:"Cancelar",role:"cancel"},{text:"Guardar",handler:(h=(0,s.A)(function*(v){return yield e.taskService.add(g,v),yield e.loadTasks(),e.showToast("Tarea creada correctamente"),!0}),function(S){return h.apply(this,arguments)})}]})).present():(yield e.taskService.add(g),yield e.loadTasks(),e.showToast("Tarea creada correctamente")),!0);var h}),function(g){return a.apply(this,arguments)})}]})).present()})()}toggleTask(e){var n=this;return(0,s.A)(function*(){yield n.taskService.toggleComplete(e.id),yield n.loadTasks()})()}deleteTask(e){var n=this;return(0,s.A)(function*(){var l;yield(yield n.alertCtrl.create({header:"Confirmar eliminaci\xf3n",message:"\xbfEst\xe1s seguro que deseas eliminar esta tarea?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",role:"destructive",handler:(l=(0,s.A)(function*(){yield n.taskService.delete(e),yield n.loadTasks(),n.showToast("Tarea eliminada")}),function(){return l.apply(this,arguments)})}]})).present()})()}filterTasksByCategory(e){var n=this;return(0,s.A)(function*(){n.selectedCategoryFilter=e.detail.value,yield n.loadTasks()})()}showToast(e){var n=this;return(0,s.A)(function*(){yield(yield n.toastCtrl.create({message:e,duration:1500,position:"bottom"})).present()})()}getCategoryName(e){if(!e||!this.categories||0===this.categories.length)return"Sin categor\xeda";const n=this.categories.find(a=>String(a.id)===String(e));return n?n.name:"Sin categor\xeda"}goToCategories(){this.router.navigate([C.c.CATEGORY])}trackById(e,n){return n.id}static#t=o=()=>(this.\u0275fac=function(n){return new(n||i)(t.rXU(x),t.rXU(F.M),t.rXU(r.hG),t.rXU(r.K_),t.rXU(A.Ix))},this.\u0275cmp=t.VBU({type:i,selectors:[["app-home"]],decls:22,vars:4,consts:[["noTasks",""],["color","primary"],[1,"toolbar-title"],["name","checkmark-done-outline","slot","start"],["slot","end",1,"header-buttons"],["fill","clear",1,"add-btn",3,"click"],["name","add-circle-outline","slot","start"],["fill","clear",1,"category-btn",3,"click"],["name","folder-open-outline","slot","icon-only"],[1,"ion-padding"],[1,"filter-card","ion-margin-bottom","ion-padding"],["lines","none"],["name","funnel-outline","slot","start"],["interface","popover","placeholder","Filtrar por categor\xeda",3,"ionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["class","task-list",4,"ngIf","ngIfElse"],[1,"task-list"],["class","task-card ion-margin-bottom",4,"ngFor","ngForOf","ngForTrackBy"],[1,"task-card","ion-margin-bottom"],["slot","start",3,"ionChange","checked"],[3,"ngClass"],["class","category-label",4,"ngIf"],["fill","clear","color","danger",3,"click"],["slot","icon-only","name","trash-outline",2,"font-size","25px"],[1,"category-label"],[1,"no-tasks","ion-text-center","ion-padding"],["name","clipboard-outline",2,"font-size","64px","opacity","0.6","margin-bottom","16px"],["color","primary","fill","solid",3,"click"]],template:function(n,a){if(1&n){const l=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar",1)(2,"ion-title",2),t.nrm(3,"ion-icon",3),t.EFF(4," Tareas "),t.k0s(),t.j41(5,"ion-buttons",4)(6,"ion-button",5),t.bIt("click",function(){return d.eBV(l),d.Njj(a.addTask())}),t.nrm(7,"ion-icon",6),t.EFF(8," Agregar "),t.k0s(),t.j41(9,"ion-button",7),t.bIt("click",function(){return d.eBV(l),d.Njj(a.goToCategories())}),t.nrm(10,"ion-icon",8),t.k0s()()()(),t.j41(11,"ion-content",9)(12,"ion-card",10)(13,"ion-item",11),t.nrm(14,"ion-icon",12),t.j41(15,"ion-select",13),t.bIt("ionChange",function(p){return d.eBV(l),d.Njj(a.filterTasksByCategory(p))}),t.j41(16,"ion-select-option",14),t.EFF(17,"Todas"),t.k0s(),t.DNE(18,P,2,2,"ion-select-option",15),t.k0s()()(),t.DNE(19,R,2,2,"ion-list",16)(20,G,9,0,"ng-template",null,0,t.C5r),t.k0s()}if(2&n){const l=t.sdS(21);t.R7$(16),t.Y8G("value",null),t.R7$(2),t.Y8G("ngForOf",a.categories),t.R7$(),t.Y8G("ngIf",a.tasks.length>0)("ngIfElse",l)}},dependencies:[m.MD,m.YU,m.Sq,m.bT,k.YN,r.bv,r.Jm,r.QW,r.b_,r.eY,r.W9,r.eU,r.iq,r.uz,r.he,r.nf,r.Nm,r.Ip,r.BC,r.ai,r.hB,r.Je],styles:[".filter-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 12px #00000014}.task-card[_ngcontent-%COMP%]{border-radius:12px;transition:transform .2s ease,box-shadow .2s ease;box-shadow:0 2px 6px #0000000d}.task-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 18px #0000001a}.task-label[_ngcontent-%COMP%]   h2.completed[_ngcontent-%COMP%]{text-decoration:line-through;color:#999}.category-label[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:8px;font-size:.8em;color:#000000b3;margin-top:4px;background-color:#99999920}.no-tasks[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{max-width:200px;margin-bottom:16px}.task-card[_ngcontent-%COMP%]   h2.completed[_ngcontent-%COMP%]{text-decoration:line-through;color:#999;transition:all .2s ease}.task-card[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{transition:all .2s ease}"]}))}return o(),i})();const Y=[{path:"",component:_}];let B=(()=>{var o;class i{static#t=o=()=>(this.\u0275fac=function(n){return new(n||i)},this.\u0275mod=t.$C({type:i}),this.\u0275inj=d.G2t({imports:[y.iI.forChild(Y),y.iI]}))}return o(),i})(),O=(()=>{var o;class i{static#t=o=()=>(this.\u0275fac=function(n){return new(n||i)},this.\u0275mod=t.$C({type:i}),this.\u0275inj=d.G2t({imports:[m.MD,k.YN,r.bv,B,_]}))}return o(),i})()}}]);